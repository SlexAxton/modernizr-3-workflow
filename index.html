<!doctype html>
<html lang="en">

<head>
<meta charset="utf-8">

<title>Modernizr 3 Workflow</title>

<meta name="description" content="Integrating the upcoming Modernizr 3 into your workflow.">
<meta name="author" content="Alex Sexton">

<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<link rel="stylesheet" href="css/reveal.min.css">
<link rel="stylesheet" href="css/theme/sky.css" id="theme">

<!-- For syntax highlighting -->
<link rel="stylesheet" href="lib/css/zenburn.css">

<!-- If the query includes 'print-pdf', use the PDF print sheet -->
<script>
document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
</script>

<!--[if lt IE 9]>
  <script src="lib/js/html5shiv.js"></script>
<![endif]-->

<style type="text/css">
  /* quick overrides */
.reveal h1, .reveal h2, .reveal h3, .reveal h4, .reveal h5, .reveal h6 {
  text-transform: none;
}
.reveal h1 {
  font-size: 3em;
}
.reveal pre {
  font-size: 1em;
  width: 118%;
  margin-left: -5%;
  padding: 10px;
  background-color: rgba(0,0,0, 0.1);
}
.reveal pre code {
  padding: 10px;
  max-height: 700px;
  /*-webkit-filter: invert(100%); BACK POCKET */
}
section[t] h1 {
  font-size: 2.75em;
  margin-bottom: 1em;
}
section[t] h2 {
  letter-spacing: -2px;
}
section[t] blockquote {
  border: 4px solid #CDC9C3;
  border-radius: 10px;
  background-color: #EFEFEF;
  padding: 20px;
}
.reveal em {
  color: #BADA55;
  font-style: normal;
  text-shadow: 1px 1px 0 #FFFFFF, 3px 3px 0 #000000;
}
.reveal iframe {
  max-height: none;
}
.reveal img {
  max-width: none;
}
</style>
</head>

<body>

<div class="reveal">

  <!-- Any section element inside of this container is displayed as a slide -->
  <div class="slides">

    <section>
      <h1>A Modernizr 3 Workflow</h1>
      <h4>HTML5DevConf, April 2013</h4>
      <p>
      <small><a href="http://alexsexton.com">Alex Sexton</a> / <a href="http://twitter.com/slexaxton">@SlexAxton</a></small>
      </p>
    </section>

<section data-markdown t>
<script type="text/template">
## Me

* UI Engineer at Bazaarvoice in Austin, TX
* Hate bulleted lists
* jQuery Board of Advisors
* Modernizr Core Team
* Run TXJS
</script>
</section>


<!-------START NORMAL SLIDES ----------->

<section data-markdown>
<script type="text/template">
## Your Goal
#### (*usually*)

To deliver the best possible **experience** to the **widest audience** possible
</script>

<aside class="notes">
- we all have a passion for this or we wouldn’t put up with it
- the new stuff that is _possible_ is absolutely mind blowing
- constraints are an implementation detail
</aside>
</section>

<section data-markdown>
<script type="text/template">
## Your Reality
#### (*usually*)

An environment that is fragmented, inconsistent and unpredictable in nearly *every* facet.
</script>
</section>

<section>
<section data-markdown>
<script type="text/template">
## You'd like

### *Consistent* Experiences
</script>
</section>

<section data-markdown>
<script type="text/template">
## You'd like

### Client and User *Happiness*
</script>
</section>

<section data-markdown>
<script type="text/template">
## You'd like

### *Good* Specifications
</script>
</section>
</section>

<section>
<section data-markdown>
<script type="text/template">
## You get

### *Inconsistent* Experiences
</script>
</section>

<section data-markdown>
<script type="text/template">
## You get

### Client and User *Confusion*
</script>
</section>

<section data-markdown>
<script type="text/template">
## You get

### *Partial* Specifications
</script>

<aside class="notes">
- there’s the bugs
- there’s the missing features (apis and actual browser chrome features)
- there’s the sheer speed difference
</aside>
</section>
</section>

<section data-markdown>
<script type="text/template">
# The First Step to Being Happy

&nbsp;

### Care about the *quality* of
### each browser experience,

&nbsp;

### *not* the differences between them.
</script>
</section>

<section>
<section data-markdown>
<script type="text/template">
# Dealing with Fragmentation
</script>
</section>

<section data-markdown>
<script type="text/template">
## Different Screen Sizes
</script>
</section>

<section data-markdown>
<script type="text/template">
## Different APIs
</script>
</section>

<section data-markdown>
<script type="text/template">
## Different *speeds*
</script>

<aside class="notes">
This is one that's hard to detect, but one of the
most important ones.
</aside>
</section>

<section data-markdown>
<script type="text/template">
## Different Hardware Controls
</script>
</section>

<section data-markdown>
<script type="text/template">
## Different Everything
</script>

<aside class="notes">
Will your app work on a google glass?
</aside>
</section>
</section>

<section data-markdown>
<script type="text/template">
## Dealing with this stuff is
# Responsive Web Design
</script>
<aside class="notes">
But there are lots of ways to respond.
</aside>
</section>

<section data-markdown>
<script type="text/template">
## Responsive Web Design
# is *not* just
## fitting on different screen sizes
</script>
</section>

<section data-markdown>
<script type="text/template">
# Prior Art

* Nicholas Zakas - [Progressive Enhancement 2.0](http://www.slideshare.net/nzakas/progressive-enhancement-20-conference-agnostic)
* Paul Irish - [Tiered Adaptive Front-end Experiences](http://paulirish.com/2011/tiered-adaptive-front-end-experiences/)
</script>
</section>

<section>
<section data-markdown>
<script type="text/template">
## The TV Analogy

![lib/img/tv-2.png](lib/img/tv-2.png)

<small>http://www.slideshare.net/nzakas/progressive-enhancement-20-conference-agnostic</small>
</script>
</section>
<section data-markdown>
<script type="text/template">
## The TV Analogy

![lib/img/tv-1.png](lib/img/tv-1.png)

<small>http://www.slideshare.net/nzakas/progressive-enhancement-20-conference-agnostic</small>
</script>
</section>
<section data-markdown>
<script type="text/template">
## The TV Analogy

![lib/img/tv-3.png](lib/img/tv-3.png)

<small>http://www.slideshare.net/nzakas/progressive-enhancement-20-conference-agnostic</small>
</script>
</section>
<section data-markdown>
<script type="text/template">
## The TV Analogy

![lib/img/tv-4.png](lib/img/tv-4.png)

<small>http://www.slideshare.net/nzakas/progressive-enhancement-20-conference-agnostic</small>
</script>
</section>
<section data-markdown>
<script type="text/template">
## The TV Analogy

![lib/img/tv-5.png](lib/img/tv-5.png)

<small>http://www.slideshare.net/nzakas/progressive-enhancement-20-conference-agnostic</small>
</script>
</section>
<section data-markdown>
<script type="text/template">
## The TV Analogy

![lib/img/tv-6.png](lib/img/tv-6.png)

<small>http://www.slideshare.net/nzakas/progressive-enhancement-20-conference-agnostic</small>
</script>
</section>
</section>

<section data-markdown>
<script type="text/template">
# TAFEE
#### (pronounced: taffy)

**t**iered, **a**daptive **f**ront-**e**nd **e**xperiences

Customizing the experience to the unique capabilities of each browser, **prioritizing a fast and good UX over consistency.**
</script>

<aside class="notes">
A lot of people leave off the second part, in favor for things that are just broken in each environment
</aside>
</section>

<section data-markdown>
<script type="text/template">
# There are *tools* to help you!
</script>
</section>

<section>
<section data-markdown>
<script type="text/template">
## Modernizr

It's an object with a bunch of booleans on it.
</script>
</section>

<section data-markdown>
<script type="text/template">
## Modernizr

It's an *ideology*

&nbsp;

<small>In the not creepy, and with exceptions kind of way</small>
</script>
</section>
</section>

<section data-markdown>
<script type="text/template">
## It's popular!
### Used by:

* rollerderbyspace.com
* blueskypowerwashing.com
* antportal.com
* twitter
* microsoft
* google
</script>
</section>

<section data-markdown>
<script type="text/template">
# Fork on *Features*

If you are building conditional logic into

your app for runtime differences

### make that condition a feature.
</script>
</section>

<section data-markdown>
<script type="text/template">
## How Modernizr Works (JS)

```javascript
if (Modernizr.sometest) {
  // sometest is supported
}
else {
  // sometest is *not* supported
}
```
</script>
</section>

<section data-markdown>
<script type="text/template">
## How Modernizr Works (JS)

```javascript
if (Modernizr.geolocation) {
  // geolocation is supported
}
else {
  // geolocation is *not* supported
}
```
</script>
</section>

<section data-markdown>
<script type="text/template">
## How Modernizr Works (CSS)

```html
<button class="glossy">Click Me!</button>
```

```css
.no-js .glossy,
.no-cssgradients .glossy {
  background: url("img/glossybg.png");
}

.cssgradients .glossy {
  background-image: linear-gradient(top, #555, #333);
}
```
</script>
</section>

<section data-markdown>
<script type="text/template">
## **Aside**: What browser is this?

```
Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_1) AppleWebKit/535.6 (KHTML, like Gecko) Chrome/16.0.899.0 Safari/535.6
```
</script>
</section>

<section>
<section data-markdown>
<script type="text/template">
# The *myth* of the polyfill
</script>
</section>

<section data-markdown>
<script type="text/template">
## Polyfill

"A shim that mimics a future API providing fallback functionality to older browsers."
</script>
</section>

<section data-markdown>
<script type="text/template">
## Polyfill

Pretty much a fancy word for **shim**.

<aside class="notes">
Bosses love fancy words.
<br>
Though polyfills specifically mimic standard apis
</aside>
</script>
</section>

<section data-markdown>
<script type="text/template">
## Prollyfill

A shim that mimics what will probably be a future API
</script>
</section>

<section data-markdown>
<script type="text/template">
## Parlayfill

Betting that an API will one day exist.
</script>
</section>

<section data-markdown>
<script type="text/template">
## Poorlyfill

A shim that doesn't really fill anything useful.
</script>
</section>

<section data-markdown>
<script type="text/template">
## **Polyfill**

* Coined by remy sharp in Introducing HTML5
* Regressive Enhancement
* Pretty useful in a lot of situations!
</script>
</section>

<section data-markdown>
<script type="text/template">
## The Myth

You can just use polyfills to upgrade old browsers to new capabilities.
</script>

<aside class="notes">
This goes directly against the 'dont show HDTV owners Black &amp; White 4:3 TV' thing from before.
</aside>
</section>

<section data-markdown>
<script type="text/template">
## Polyfills

Come at a *cost*.
</script>
</section>

<section data-markdown>
<script type="text/template">
### The answer lies somewhere between

## Use them for **everything**

# &

## Use them for **nothing**
</script>
</section>
</section>

<section>
<section data-markdown>
<script type="text/template">
# Modernizr **3**
</script>
</section>

<section data-markdown>
<script type="text/template">
# What's new?

## Build System
</script>
</section>

<section data-markdown>
<script type="text/template">
# What's new?

## Integration
</script>
</section>

<section data-markdown>
<script type="text/template">
# What's new?

## Supported Test Coverage
</script>
</section>

<section data-markdown>
<script type="text/template">
# What's new?

## CSS @Supports
</script>
</section>

<section data-markdown>
<script type="text/template">
# What's new?

## Best Practices
</script>
</section>

<section data-markdown>
<script type="text/template">
# What's new?

## Yepnope
</script>
</section>
</section>

<section>
<section data-markdown>
<script type="text/template">
## Modernizr 3: **Build/Integration**

```json
// modernizr.json
{
  "classPrefix": "my-"
  "options": ["load", "html5printshiv"],
  "tests": ["audio", "video", "cssgradients"]
}
```

```sh
npm install -g modernizr
modernizr modernizr.json > modernizr.custom.js
```
</script>
</section>

<section data-markdown>
<script type="text/template">
## Modernizr 3: **Build/Integration**

Treat `modernizr.json` like you would `package.json`

</script>

<aside class="notes">
We're considering support for just including your modernizr config inside of the package.json file if you have it.
</aside>
</section>

<section data-markdown>
<script type="text/template">
## Modernizr 3: **Build/Integration**

Your `modernizr.custom.js` script will have the

**absolute minimum** contents.

Consider inlining this script if it's small enough.
</script>
</section>
</section>

<section data-markdown>
<script type="text/template">
## Modernizr 3: **Supported Tests**

No more `community_detects`.

Everything gets built as part of the core build.

This is faster than the old `Modernizr.addTest` stuff.
</script>
</section>

<section>
<section data-markdown>
<script type="text/template">
## Modernizr 3: **Best Practices**

We want to align the **TAFEE** ideology with the **Modernizr.load** mentality.
</script>
</section>

<section data-markdown>
<script type="text/template">
## Modernizr 3: **Best Practices**

Many separate file loads, lots of variance,

no builds, bad performance

```javascript
Modernizr.load([{
  test: Modernizr.audio,
  yep: ['a.js'],
  nope: ['b.js']
}, {
  test: Modernizr.video,
  yep: ['c.js'],
  nope: ['d.js']
},{
  test: Modernizr.cssgradients,
  yep: ['e.js'],
  nope: ['f.js']
},
...]);
```
</script>
</section>

<section data-markdown>
<script type="text/template">
## Modernizr 3: **Best Practices**

Think of your app like people think of televisions.

&nbsp;

# Low-Res -> SD -> HD

</script>
</section>

<section data-markdown>
<script type="text/template">
## Modernizr 3: **Best Practices**

Define a baseline of features for each tier

```javascript
// Simplified -- make your OWN tiers
var TIER;
if (Modernizr.video && Modernizr.cssgradients) {
  TIER = 'HD';
}
else if (Modernizr.cssgradients) {
  TIER = 'SD';
}
else {
  TIER = 'LOWRES';
}

// One Async request
Modernizr.load(TIER + '.build.js');
```
</script>
</section>

<section data-markdown>
<script type="text/template">
# Tiered Builds

Promote more realistic feature sets for each browser
</script>
</section>

<section data-markdown>
<script type="text/template">
# Tiered Builds

## Promote better *performance*

#### You're never trying to do too much with old browsers

#### You're never loading more than the browser needs

#### You're ideally loading a single, small, feature-specific built js file
</script>
</section>

<section data-markdown>
<script type="text/template">
# Tiered Builds

Reduce the energy in testing all combinations of feature support

<small>(If you <strong>can</strong> test all variations easily, that's an ok thing to do)</small>
</script>
</section>
</section>

<section>
<section data-markdown>
<script type="text/template">
# Deploying JavaScript Applications
</script>
</section>

<section data-markdown>
<script type="text/template">
## A recent blogpost

[alexsexton.com/blog/2013/03/deploying-javascript-applications/](http://alexsexton.com/blog/2013/03/deploying-javascript-applications/)
</script>
</section>

<section data-markdown>
<script type="text/template">
## Performance and UX are **inextricably** linked
</script>
</section>

<section data-markdown>
<script type="text/template">
# **Balance**

&nbsp;

### Lots of cool JS, CSS, &amp; Images
## **vs.**
### Small payloads and minimal bloat
</script>
</section>

</section>

<section>
<section data-markdown>
<script type="text/template">
# **Builds**

Develop with **builds** in mind.
</script>
</section>

<section data-markdown>
<script type="text/template">
## Use a **dependency management** tool

#### RequireJS, Browserify, Rails Asset Pipeline, etc

I prefer tools that allow me to declare my dependencies **once**.
</script>
</section>

<section data-markdown>
<script type="text/template">
## Prioritize *fast*, *easy* builds

```javascript
grunt build
```

![lib/img/gruntbuild.gif](lib/img/gruntbuild.gif)
</script>
</section>
</section>

<section>
<section data-markdown>
<script type="text/template">
## Load the **absolute minimum** on pageload

### This is where **Modernizr** can help.

```javascript
// Don't load in polyfills for Chrome 25
// Don't load WebGL code for IE6
Modernizr.load(TIER + '-init.build.js');
```
</script>
</section>

<section data-markdown>
<script type="text/template">
## JavaScript **Parsing** is slow, too

File-size aside, **the amount** of JS you load makes a difference
</script>
</section>

<section data-markdown>
<script type="text/template">
## **Defer** functionality until you think you need it

![lib/img/delaypackage.gif](lib/img/delaypackage.gif)
</script>
</section>
</section>

<section>
<section data-markdown>
<script type="text/template">
## The **Scout File**

Pretty much a fancy name for a bootstrap file
</script>
</section>

<section data-markdown>
<script type="text/template">
## The **Scout File**

## One file that is the **brain** for deciding what gets loaded.
</script>
</section>

<section data-markdown>
<script type="text/template">
## The **Scout File**

## Super small - no dependencies
</script>
</section>

<section data-markdown>
<script type="text/template">
## The **Scout File**

## Lightly Cached
</script>
</section>

<section data-markdown>
<script type="text/template">
## **Everything Else**

# **Cached Forever**
</script>
</section>

<section data-markdown>
<script type="text/template">
## The **Scout File**

## This is where you'd use *modernizr* to load exactly the build that the user needs (and nothing more)
</script>
</section>

<section data-markdown>
<script type="text/template">
## Simple Example of Scout File
### (For studying later :)
```javascript
// Simplified example of a scout file
(function () {
  // Feature test some stuff
  var features = {
    svg: Modernizr.svg,
    touch: Modernizr.touch
  };

  // The async script injection fanfare
  var script = document.createElement('script');
  var fScript = document.getElementsByTagName('script')[0];

  var baseUrl = '//cool-cdn.com/bucket/' + __BUILDNUM__ + '/';


  // Build up a file url based on the features of this user
  var featureString = '';
  for (var i in features) {
    if (features.hasOwnProperty(i) && features[i]) {
      featuresString += '-' + i;
    }
  }
  var package = 'build' + featureString + '.js'

  // Set the URL on the script
  script.src = baseUrl + package;

  // Inject the script
  fScript.parentNode.insertBefore(script, fScript);

  // Start loading the data that you know you can grab right away
  // JSONP is small and easy to kick off for this.
  var dataScript = document.createElement('script');

  // Create a JSONP Url based on some info we have.
  // We'll assume localstorage for this example
  // though a cookie or url param might be safer.

  window.appInitData = function (initialData) {
    // Get it to the core application when it eventually
    // loads or if it's already there.
    // A global is used here for ease of example
    window.comeGetMe = initialData;
  };

  // If we're on a static site, the url might tell us
  // the data we need, and the user cookie might customize
  // it. Simplified.
  dataScript.src = '//api.mysite.com' +
                   document.location.pathname +
                   '?userid=' +
                   localStorage.getItem('userid') +
                   '&callback=appInitData;';

  // Inject it
  fScript.parentNode.insertBefore(dataScript, fScript);
})();
```
</script>
</section>

<section data-markdown>
<script type="text/template">
## Edge Cache **Everything**

Use any of the popular CDNs to get your **static builds** closer to their consumers
</script>
</section>


<section data-markdown>
<script type="text/template">
## **All Together**

### Enjoy a **fast**, well-functioning experience, tailored for **specific** audiences based on their own expectations.
</script>

<aside class="notes">
This is pretty close to our goal of 'best experience for widest possible audience'
</aside>
</section>

<section data-markdown>
<script type="text/template">
## Remember: **Your Goal**

To deliver the best possible **experience** to the **widest audience** possible
</script>
</section>


</section>

<section>
<section data-markdown>
<script type="text/template">
## **Recap**

### **Don't** worry about identical experiences
</script>
</section>

<section data-markdown>
<script type="text/template">
## **Recap**

### **Do** worry about appropriate, performant experiences
</script>
</section>

<section data-markdown>
<script type="text/template">
## **Recap**

### **Don't** create new problems with too much '*enhancement*'
</script>
</section>

<section data-markdown>
<script type="text/template">
## **Recap**

### **Do** branch on features and polyfill where convenient, easy, and fast
</script>
</section>

<section data-markdown>
<script type="text/template">
## **Recap**

### **Do** integrate Modernizr **3** into your build process to save requests and space
</script>
</section>

<section data-markdown>
<script type="text/template">
# **Do** build cool stuff.
</script>
</section>

</section>


<!-------END NORMAL SLIDES ----------->

    <section>
      <h1>Fin.</h1>
      <h3>Questions?</h3>

      <p>
      <small><br> <a href="http://alexsexton.com/talks/modernizr-3-workflow">alexsexton.com/talks/modernizr-3-workflow</a></small>
      </p>
    </section>

  </div>

</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.min.js"></script>


<script>

// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({
  controls: true,
  progress: true,
  history: true,
  center: true,
  width: 1024,

  theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
  transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

  // Optional libraries used to extend on reveal.js
  dependencies: [
    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
    { src: 'plugin/markdown/showdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
    { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
    { src: 'plugin/highlight/highlight.js', async: true, callback: function() {
      hljs.initHighlightingOnLoad();
    } },
    { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
    { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
    //,{ src: 'plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
  ]
});

</script>

</body>
</html>
